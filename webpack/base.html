<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack基础 | MrZhao&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/assets/logo.jpg">
    <meta name="description" content="个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.7f07d26c.css" as="style"><link rel="preload" href="/assets/js/app.ca0e2042.js" as="script"><link rel="preload" href="/assets/js/3.7ffb9e19.js" as="script"><link rel="preload" href="/assets/js/2.390750c2.js" as="script"><link rel="preload" href="/assets/js/1.8e0d53f0.js" as="script"><link rel="preload" href="/assets/js/127.52389d4a.js" as="script"><link rel="prefetch" href="/assets/js/100.f6c67a87.js"><link rel="prefetch" href="/assets/js/101.2ca57a24.js"><link rel="prefetch" href="/assets/js/102.20f350f3.js"><link rel="prefetch" href="/assets/js/103.90406fa9.js"><link rel="prefetch" href="/assets/js/104.e433604f.js"><link rel="prefetch" href="/assets/js/105.e237367c.js"><link rel="prefetch" href="/assets/js/106.8f2cbf83.js"><link rel="prefetch" href="/assets/js/107.96d0c8c5.js"><link rel="prefetch" href="/assets/js/108.3237136c.js"><link rel="prefetch" href="/assets/js/109.98a5dc85.js"><link rel="prefetch" href="/assets/js/11.a2a445ae.js"><link rel="prefetch" href="/assets/js/110.48b8eba6.js"><link rel="prefetch" href="/assets/js/111.a67b117c.js"><link rel="prefetch" href="/assets/js/112.1cba30c2.js"><link rel="prefetch" href="/assets/js/113.407b47cb.js"><link rel="prefetch" href="/assets/js/114.40ae998e.js"><link rel="prefetch" href="/assets/js/115.50018503.js"><link rel="prefetch" href="/assets/js/116.2a1b5445.js"><link rel="prefetch" href="/assets/js/117.0a9aed30.js"><link rel="prefetch" href="/assets/js/118.e9b37dbd.js"><link rel="prefetch" href="/assets/js/119.ac213be7.js"><link rel="prefetch" href="/assets/js/12.1732f38f.js"><link rel="prefetch" href="/assets/js/120.e144de0b.js"><link rel="prefetch" href="/assets/js/121.e5761c81.js"><link rel="prefetch" href="/assets/js/122.9053c081.js"><link rel="prefetch" href="/assets/js/123.b209b43b.js"><link rel="prefetch" href="/assets/js/124.cea03e5f.js"><link rel="prefetch" href="/assets/js/125.8f5c10d3.js"><link rel="prefetch" href="/assets/js/126.eaf66021.js"><link rel="prefetch" href="/assets/js/128.3ffe9bdd.js"><link rel="prefetch" href="/assets/js/129.2754062d.js"><link rel="prefetch" href="/assets/js/13.863a2d51.js"><link rel="prefetch" href="/assets/js/130.49c279cd.js"><link rel="prefetch" href="/assets/js/14.051312e9.js"><link rel="prefetch" href="/assets/js/15.933aac0f.js"><link rel="prefetch" href="/assets/js/16.00409db4.js"><link rel="prefetch" href="/assets/js/17.315387cb.js"><link rel="prefetch" href="/assets/js/18.e129965c.js"><link rel="prefetch" href="/assets/js/19.04170ad8.js"><link rel="prefetch" href="/assets/js/20.d96eaf13.js"><link rel="prefetch" href="/assets/js/21.b79ed130.js"><link rel="prefetch" href="/assets/js/22.feb33a5a.js"><link rel="prefetch" href="/assets/js/23.3b6ab9cd.js"><link rel="prefetch" href="/assets/js/24.25445cf2.js"><link rel="prefetch" href="/assets/js/25.16a72e00.js"><link rel="prefetch" href="/assets/js/26.7dd5f53d.js"><link rel="prefetch" href="/assets/js/27.b0bc1ca9.js"><link rel="prefetch" href="/assets/js/28.ef803a86.js"><link rel="prefetch" href="/assets/js/29.e1a0d2ab.js"><link rel="prefetch" href="/assets/js/30.50567e5d.js"><link rel="prefetch" href="/assets/js/31.89d5ccb8.js"><link rel="prefetch" href="/assets/js/32.b499f7bf.js"><link rel="prefetch" href="/assets/js/33.7d53bdf4.js"><link rel="prefetch" href="/assets/js/34.4fa70eb4.js"><link rel="prefetch" href="/assets/js/35.265e775f.js"><link rel="prefetch" href="/assets/js/36.30a56797.js"><link rel="prefetch" href="/assets/js/37.f0352765.js"><link rel="prefetch" href="/assets/js/38.c9abef46.js"><link rel="prefetch" href="/assets/js/39.07d99082.js"><link rel="prefetch" href="/assets/js/4.b0c01abe.js"><link rel="prefetch" href="/assets/js/40.c463595f.js"><link rel="prefetch" href="/assets/js/41.524a73d9.js"><link rel="prefetch" href="/assets/js/42.ddbc00cd.js"><link rel="prefetch" href="/assets/js/43.62c4d59a.js"><link rel="prefetch" href="/assets/js/44.c85fc402.js"><link rel="prefetch" href="/assets/js/45.4d45c710.js"><link rel="prefetch" href="/assets/js/46.8ba0e437.js"><link rel="prefetch" href="/assets/js/47.214935d5.js"><link rel="prefetch" href="/assets/js/48.e96778b8.js"><link rel="prefetch" href="/assets/js/49.cc171454.js"><link rel="prefetch" href="/assets/js/5.9651ef5a.js"><link rel="prefetch" href="/assets/js/50.567a8429.js"><link rel="prefetch" href="/assets/js/51.d3d94aa1.js"><link rel="prefetch" href="/assets/js/52.5592450c.js"><link rel="prefetch" href="/assets/js/53.eecc97d0.js"><link rel="prefetch" href="/assets/js/54.9e7e4c61.js"><link rel="prefetch" href="/assets/js/55.5c82627a.js"><link rel="prefetch" href="/assets/js/56.86892584.js"><link rel="prefetch" href="/assets/js/57.a21ef542.js"><link rel="prefetch" href="/assets/js/58.961665e1.js"><link rel="prefetch" href="/assets/js/59.6f2bcd4d.js"><link rel="prefetch" href="/assets/js/6.c4fb4ab4.js"><link rel="prefetch" href="/assets/js/60.f6ec3d35.js"><link rel="prefetch" href="/assets/js/61.d229a600.js"><link rel="prefetch" href="/assets/js/62.503c639e.js"><link rel="prefetch" href="/assets/js/63.14e5f175.js"><link rel="prefetch" href="/assets/js/64.9a298d38.js"><link rel="prefetch" href="/assets/js/65.90e882e2.js"><link rel="prefetch" href="/assets/js/66.3c20b93f.js"><link rel="prefetch" href="/assets/js/67.88770744.js"><link rel="prefetch" href="/assets/js/68.0b71f235.js"><link rel="prefetch" href="/assets/js/69.2f95b5d2.js"><link rel="prefetch" href="/assets/js/7.1dc57eff.js"><link rel="prefetch" href="/assets/js/70.7eb281a7.js"><link rel="prefetch" href="/assets/js/71.9e05d08c.js"><link rel="prefetch" href="/assets/js/72.e692d0d8.js"><link rel="prefetch" href="/assets/js/73.8c18f17b.js"><link rel="prefetch" href="/assets/js/74.0dff2ce1.js"><link rel="prefetch" href="/assets/js/75.a9b6e657.js"><link rel="prefetch" href="/assets/js/76.07c9f415.js"><link rel="prefetch" href="/assets/js/77.454ada8e.js"><link rel="prefetch" href="/assets/js/78.12f77f2a.js"><link rel="prefetch" href="/assets/js/79.b0f10662.js"><link rel="prefetch" href="/assets/js/8.c05559cd.js"><link rel="prefetch" href="/assets/js/80.04d5924f.js"><link rel="prefetch" href="/assets/js/81.67e7e58f.js"><link rel="prefetch" href="/assets/js/82.78b01610.js"><link rel="prefetch" href="/assets/js/83.ec58eb9c.js"><link rel="prefetch" href="/assets/js/84.dd6f32aa.js"><link rel="prefetch" href="/assets/js/85.192e8a4c.js"><link rel="prefetch" href="/assets/js/86.58d82323.js"><link rel="prefetch" href="/assets/js/87.a82dd730.js"><link rel="prefetch" href="/assets/js/88.31412da2.js"><link rel="prefetch" href="/assets/js/89.f172fc35.js"><link rel="prefetch" href="/assets/js/90.d4096e8f.js"><link rel="prefetch" href="/assets/js/91.938cfbd2.js"><link rel="prefetch" href="/assets/js/92.051e05d1.js"><link rel="prefetch" href="/assets/js/93.b9608e1d.js"><link rel="prefetch" href="/assets/js/94.794a092f.js"><link rel="prefetch" href="/assets/js/95.fec66df2.js"><link rel="prefetch" href="/assets/js/96.5cedc52b.js"><link rel="prefetch" href="/assets/js/97.2ec3ffc9.js"><link rel="prefetch" href="/assets/js/98.09509a21.js"><link rel="prefetch" href="/assets/js/99.e32904a8.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.a32f4da1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f07d26c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MrZhao's blog</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feBase/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ES6/base.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/feBase/css/1.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/feBase/browser/1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/feBase/mini/1.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/1.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  SSR
</a></li><li class="dropdown-item"><!----> <a href="/cloudflare/tunnel.html" class="nav-link">
  Cloudflare
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/rollup/base.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/leetcode/array.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  常见问题
</a></div><div class="nav-item"><a href="/web3/" class="nav-link">
  web3
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/feBase/js/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ES6/base.html" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/feBase/css/1.html" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/feBase/browser/1.html" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/feBase/mini/1.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/1.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/ssr/" class="nav-link">
  SSR
</a></li><li class="dropdown-item"><!----> <a href="/cloudflare/tunnel.html" class="nav-link">
  Cloudflare
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="打包工具" class="dropdown-title"><span class="title">打包工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="打包工具" class="mobile-dropdown-title"><span class="title">打包工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/rollup/base.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/leetcode/array.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  常见问题
</a></div><div class="nav-item"><a href="/web3/" class="nav-link">
  web3
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webpack/base.html" aria-current="page" class="active sidebar-link">webpack基础</a></li><li><a href="/webpack/usage.html" class="sidebar-link">webpack的安装和使用</a></li><li><a href="/webpack/babelConfig.html" class="sidebar-link">babel配置</a></li><li><a href="/webpack/process.html" class="sidebar-link">webpack打包流程及优化</a></li><li><a href="/webpack/shaking.html" class="sidebar-link">tree-shaking</a></li><li><a href="/webpack/asyncLoad.html" class="sidebar-link">webpack 懒加载原理解析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#webpack是什么">webpack是什么</a></li><li><a href="#webpack核心概念">webpack核心概念</a></li><li><a href="#filename-和-chunkfilename、webpackchunkname">filename 和 chunkFilename、webpackChunkName</a><ul><li><a href="#filename">filename</a></li><li><a href="#chunkfilename">chunkFilename</a></li><li><a href="#webpackchunkname">webpackChunkName</a></li></ul></li><li><a href="#webpackprefetch、webpackpreload">webpackPrefetch、webpackPreload</a><ul><li><a href="#webpackprefetch">webpackPrefetch</a></li><li><a href="#webpackpreload">webpackPreload</a></li></ul></li><li><a href="#hash、chunkhash、contenthash">hash、chunkhash、contenthash</a><ul><li><a href="#hash">hash</a></li><li><a href="#chunkhash">chunkhash</a></li><li><a href="#contenthash">contenthash</a></li></ul></li><li><a href="#sourse-map的应用">sourse-map的应用</a></li></ul></div><p></p> <h2 id="webpack是什么"><a href="#webpack是什么" class="header-anchor">#</a> webpack是什么</h2> <blockquote><p><code>webpack</code> 是一个<code>JavaScript</code>静态模块打包器，当<code>webpack</code>处理应用程序时会递归构建一个依赖关系图，包含程序需要的每个模块，然后将这些模块打包成一个或者多个<code>budle</code></p></blockquote> <h2 id="webpack核心概念"><a href="#webpack核心概念" class="header-anchor">#</a> webpack核心概念</h2> <div class="custom-block tip"><p class="custom-block-title">核心</p> <p><code>webpack</code> 配置中需要理解的几个核心概念 ：<strong><code>Entry</code></strong>，<strong><code>Output</code></strong>，<strong><code>Loaders</code></strong>，<strong><code>Plugins</code></strong>，<strong><code>Chunk</code></strong></p> <ul><li><p><strong><code>Entry</code></strong>：指定<code>webpack</code>开始构建的入口模块，从该模块开始构并计算出直接或间接依赖的模块或者库。</p></li> <li><p><strong><code>Output</code></strong>：告诉<code>webpack</code>如何命名输出文件以及输出的目录</p></li> <li><p><strong><code>Loaders</code></strong>：由于<code>webpack</code>只能处理<code>JavaScript</code>，所以我们需要将一些非<code>js</code>文件处理成<code>webpack</code>能够处理的模块，比如<code>.vue、.scss</code>等文件。</p></li> <li><p><strong><code>Plugins</code></strong>：<code>plugin</code>有着很强的能力，从打包优化和压缩，一直到重新定义环境中的变量。辅助<code>webpack</code>更好的按照我们指定的方式打包代码。</p></li> <li><p><strong><code>module</code></strong>：我们自己写的代码文件，一个文件就相当于一个模块，不管是css、js都是模块。</p></li> <li><p><strong><code>Chunk</code></strong>：当<code>webpack</code>根据我们传入的入口文件将我们写的<code>module</code>进行打包时，会根据文件的引用关系，生成<code>chunk</code>，将一个模块中用到的代码(包括引用的)都生成到一个<code>chunk</code>。额外打包的代码会被单独分出一个文件，实现单独加载，但是属于同一个<code>chunk</code>，<code>webpack</code>会建立内部关系。</p></li></ul> <p><code>coding split</code>的产物，我们可以把一些代码打包成一个单独的<code>Chunk</code>，比如某些公共模块、组件、第三方包，更好的利用缓存。或者按需加载某些功能模块，优化加载时间。在<code>webpack3</code>中我们使用<code>CommonsChunkPlugin</code>将一些公共代码分割成一个<code>chuak</code>，实现单独加载。在webpack4中我们使用<code>SplitChunksPlugin</code></p> <ul><li><strong><code>bundle</code></strong>：<code>webpack</code>将<code>chunk</code>文件处理好之后，最终会输出<code>bundle</code>文件，<code>bundle</code>文件包含了经过压缩和编译的最终代码文件，可以直接在浏览器中运行。</li></ul> <p>一般来说一个<code>chunk</code>对应一个<code>bundle</code>，但是一个<code>chunk</code>也可以对应多个<code>bundle</code>，比如对于同一个<code>chunk</code>的需要额外抽离的<code>css</code>文件</p></div> <h2 id="filename-和-chunkfilename、webpackchunkname"><a href="#filename-和-chunkfilename、webpackchunkname" class="header-anchor">#</a> filename 和 chunkFilename、webpackChunkName</h2> <h3 id="filename"><a href="#filename" class="header-anchor">#</a> filename</h3> <div class="custom-block tip"><p class="custom-block-title">filename</p> <p><code>filename</code>就是打包出来的文件的名称，一般在<code>output</code>对象中会用到，在<code>MiniCssExtractPlugin</code>额外提取CSS插件中也会用到，<code>output.filename</code>的输出文件名是<code>[name].min.js</code>,<code>[name]</code>代表入口名称。</p></div> <h3 id="chunkfilename"><a href="#chunkfilename" class="header-anchor">#</a> chunkFilename</h3> <div class="custom-block tip"><p class="custom-block-title">chunkFilename</p> <p><code>chunkFilename</code>指的是不在<code>entry</code>中，却需要额外被打包出来的文件的名称，一般是需要懒加载的模块，比如<code>loadsh</code>文件。当<code>output.chunkFilename</code>没有被指定时，默认就会把chunk文件的id号当成前缀，比如<code>1.min.js</code>。</p></div> <h3 id="webpackchunkname"><a href="#webpackchunkname" class="header-anchor">#</a> webpackChunkName</h3> <div class="custom-block tip"><p class="custom-block-title">webpackChunkName</p> <p>对于多个需要异步加载的文件，如果写成<code>[name].bundle.js</code>,就会打包出<code>1.bundle.js</code>这种辨识度不高的文件名称，区分起来十分困难，这时候就可以用<code>webpackChunkName</code>注释 来标识异步加载的文件名：在import导入的时候，以注释的方式为引入的文件起别名，比如<code>await import(/* webpackChunkName: &quot;lodash&quot; */ 'lodash')</code>,这样打包出来的就是<code>vendors~lodash.bundle.js</code>，<code>vendors~</code>的前缀是<code>webpack</code>的懒加载插件<code>SplitChunksPlugin</code>里的默认配置增加的。</p> <p><code>webpackChunkName</code>就是为预加载的文件取别名</p></div> <h2 id="webpackprefetch、webpackpreload"><a href="#webpackprefetch、webpackpreload" class="header-anchor">#</a> webpackPrefetch、webpackPreload</h2> <h3 id="webpackprefetch"><a href="#webpackprefetch" class="header-anchor">#</a> webpackPrefetch</h3> <div class="custom-block tip"><p class="custom-block-title">webpackPrefetch</p> <p>预获取配置。对于懒加载的文件，只有我们需要的时候才会引入，比如点击按钮加载<code>loadsh</code>，只有点击的时候才会才会加载<code>lodash</code>：懒加载时，会动态创建一个<code>script</code>标签，被添加到<code>head</code>头里加载资源。如果我们在<code>import</code>的时候添加<code>webpackPrefetch</code>注释，会将需要预获取的文件在请求中优先级变为<code>Lowest</code>，不会等到点击按钮的时候再加载文件，而会在父<code>chunk</code>文件加载完成后，空闲时加载<code>lodash</code>文件。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vendors-loadsh.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <h3 id="webpackpreload"><a href="#webpackpreload" class="header-anchor">#</a> webpackPreload</h3> <div class="custom-block tip"><p class="custom-block-title">webpackPreload</p> <p>需要在<code>webpack</code>中使用<code>preload-webpack-plugin</code>插件，并在需要预先加载的添加<code>/* webpackPreload: true */</code>来实现预加载配置。加了<code>webpackPreload</code>注释的<code>chunk</code>会在父<code>chunk</code>加载时，以并行的方式加载,将需要预加载的文件在请求中优先级提升到<code>High</code>。原理是利用<code>link</code>标签也能加载<code>js</code>的原理，并增加<code>preload</code>属性，来实现的预加载。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <h2 id="hash、chunkhash、contenthash"><a href="#hash、chunkhash、contenthash" class="header-anchor">#</a> hash、chunkhash、contenthash</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>哈希一般都是配合<code>CDN</code>缓存来使用的。如果文件内容改变了，那么文件的哈希值也会改变，对应的<code>HTML</code>引用的<code>URL</code>地址也会改变，用户请求时，<code>CDN</code>服务器发现文件哈希更新了，会从源服务器上拉取对应的数据，更新本地缓存</p></div> <h3 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h3> <div class="custom-block tip"><p class="custom-block-title">hash</p> <p><code>hash</code>的计算是跟项目的构建相关的，项目每次构建都会生成一个新的构建<code>hash</code>值，输出的文件名中如果带有<code>hash</code>值<code>[name].[hash].js</code>,打包出的文件就会带上项目构建生成的<code>hash</code>，比如<code>index.def5949da1857d01b87e.js</code>。</p></div> <h3 id="chunkhash"><a href="#chunkhash" class="header-anchor">#</a> chunkhash</h3> <div class="custom-block tip"><p class="custom-block-title">chunkhash</p> <p>如果都以<code>hash</code>来命名，那么每次打包，都会生成新的<code>hash</code>，这样所有资源的名字都会变，对于内容没有改变的文件，就失去了<code>CDN</code>缓存的作用。<code>chunkhash</code>就解决了这个问题，根据不同的入口文件进行依赖解析、构建对应的<code>chunk</code>，生成不同的<code>chunkhash</code>。当有文件改变时，只有属于同一个<code>chunk</code>的文件名称才会改变。</p></div> <h3 id="contenthash"><a href="#contenthash" class="header-anchor">#</a> contenthash</h3> <div class="custom-block tip"><p class="custom-block-title">contenthash</p> <p>使用<code>chunkhash</code>时，其中有一个文件改变了，会生成新的<code>chunkhash</code>，那么属于同一个<code>chunk</code>的其他文件的名称也会变，但是其他文件并没有发生变化，这样也会浪费<code>CDN</code>缓存。<code>contenthash</code>就是解决这个问题的，<code>contenthash</code>是根据文件内容生成的唯一<code>hash</code>值，当文件内容不改变时，<code>contenthash</code>不会改变。一般额外提取出来的<code>css</code>会使用<code>contenthash</code>作为名称。</p></div> <h2 id="sourse-map的应用"><a href="#sourse-map的应用" class="header-anchor">#</a> sourse-map的应用</h2> <div class="custom-block tip"><p class="custom-block-title">sourse-map</p> <p><code>sourse-map</code>,就是一份源码和转换后代码的映射文件。</p> <p><code>devtool</code>常用值：</p> <ul><li>1、<code>source-map</code>:大而全，啥都有，<code>webpack</code>构建时间变长，看情况使用。</li> <li>2、<code>cheap-sourse-map</code>:<code>cheap</code>，就是廉价的意思，只会映射到行，没有列的映射，而且是转换过的代码。响应的体积会小很多。</li> <li>3、<code>cheap-module-eval-source-map</code>:开发环境可使用，在构建速度报错提醒上做了比较好的均衡。</li> <li>4、<code>cheap-module-source-map</code>:线上环境一般是不配置<code>source-map</code>的，如果想要捕捉线上的代码报错，可以用这个。</li></ul> <p>开发环境一般使用<code>cheap-module-eval-source-map</code>或者<code>cheap-sourse-map</code>，区别如下
<img src="/assets/webpack-devtool.png" alt="webpack-devtool"></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/21/2023, 3:05:32 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/webpack/usage.html">
        webpack的安装和使用
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ca0e2042.js" defer></script><script src="/assets/js/3.7ffb9e19.js" defer></script><script src="/assets/js/2.390750c2.js" defer></script><script src="/assets/js/1.8e0d53f0.js" defer></script><script src="/assets/js/127.52389d4a.js" defer></script>
  </body>
</html>
